files <- list.files(path = "output/diffusion", pattern="*.csv", full.names=TRUE)[1:60]
names <- list.files(path = "output/diffusion", pattern="*.csv", full.names=FALSE)[1:60]
for(n in 1:6){
for(i in 1:10){
if(i == 1){
res_table <- fread(files[i])
} else {
res <- fread(files[i])[, sprintf("Iteration_%s", i) := Iterations_1][, 6]
res_table <- cbind(res_table, res)
}
}
name <- names[1]
name <- gsub("_1.", ".", name)
res_table <- data.table(res_table[, 1:4], sapply(res_table[, 5:14], as.numeric))
res_table <- res_table[, Mean := rowMeans(res_table[, 5:14])]
write.table(res_table, file = sprintf("output/diffusion/consolidated/%s.csv", name), row.names = F,
sep = ",")
files <- files[-c(1:10)]
names <- names[-c(1:10)]
}
files <- list.files(path = "output/diffusion", pattern="*.csv", full.names=TRUE)[1:60]
names <- list.files(path = "output/diffusion", pattern="*.csv", full.names=FALSE)[1:60]
for(n in 1:6){
for(i in 1:10){
if(i == 1){
res_table <- fread(files[i])
} else {
res <- fread(files[i])[, sprintf("Iteration_%s", i) := Iterations_1][, 6]
res_table <- cbind(res_table, res)
}
}
name <- names[1]
name <- gsub("_1\.", ".", name)
res_table <- data.table(res_table[, 1:4], sapply(res_table[, 5:14], as.numeric))
res_table <- res_table[, Mean := rowMeans(res_table[, 5:14])]
write.table(res_table, file = sprintf("output/diffusion/consolidated/%s.csv", name), row.names = F,
sep = ",")
files <- files[-c(1:10)]
names <- names[-c(1:10)]
}
files <- list.files(path = "output/diffusion", pattern="*.csv", full.names=TRUE)[1:60]
names <- list.files(path = "output/diffusion", pattern="*.csv", full.names=FALSE)[1:60]
for(n in 1:6){
for(i in 1:10){
if(i == 1){
res_table <- fread(files[i])
} else {
res <- fread(files[i])[, sprintf("Iteration_%s", i) := Iterations_1][, 6]
res_table <- cbind(res_table, res)
}
}
name <- names[1]
name <- gsub("_1.csv", ".csv", name)
res_table <- data.table(res_table[, 1:4], sapply(res_table[, 5:14], as.numeric))
res_table <- res_table[, Mean := rowMeans(res_table[, 5:14])]
write.table(res_table, file = sprintf("output/diffusion/consolidated/%s.csv", name), row.names = F,
sep = ",")
files <- files[-c(1:10)]
names <- names[-c(1:10)]
}
files <- list.files(path = "output/diffusion", pattern="*.csv", full.names=TRUE)[1:60]
names <- list.files(path = "output/diffusion", pattern="*.csv", full.names=FALSE)[1:60]
for(n in 1:6){
for(i in 1:10){
if(i == 1){
res_table <- fread(files[i])
} else {
res <- fread(files[i])[, sprintf("Iteration_%s", i) := Iterations_1][, 6]
res_table <- cbind(res_table, res)
}
}
name <- names[1]
name <- gsub("_1.csv", "", name)
res_table <- data.table(res_table[, 1:4], sapply(res_table[, 5:14], as.numeric))
res_table <- res_table[, Mean := rowMeans(res_table[, 5:14])]
write.table(res_table, file = sprintf("output/diffusion/consolidated/%s.csv", name), row.names = F,
sep = ",")
files <- files[-c(1:10)]
names <- names[-c(1:10)]
}
library(readr)
X10_starting_100_prob_70_threshold_1_csv <- read_csv("10% starting_100% prob_70% threshold_1.csv.csv")
View(X10_starting_100_prob_70_threshold_1_csv)
g <- fread("10% starting_100% prob_70% threshold_1.csv.csv")
g <- fread("output/diffusion/10% starting_100% prob_70% threshold_1.csv.csv")[]
View(g)
g <- fread("output/diffusion/10% starting_100% prob_70% threshold_1.csv.csv")[, 1:5]
save(g, file = "g.txt")
save(g, file = "g.csv")
write.table(g, file = "g.csv")
write.table(g, file = "g.csv", row.names = F, sep = ",")
# install packages
list.of.packages <- c("data.table", "igraph", "statnet", "tidyverse", "magrittr", "dplyr")
sapply(list.of.packages, library, character.only = TRUE)
rm(list.of.packages)
files <- list.files(path = "data/all_data", pattern = "*.csv", full.names = T)
names <- list.files(path = "data/all_data", pattern = "*.csv", full.names = F)
files[243]
for(k in 243:513){
net <- fread(files[k])
name <- names[k]
net <- unique(net)
t <- 1
n <- c()
for(i in 1:nrow(net)){
if(net[i, Node1] %in% net$Node2){
c <- which(net$Node2 %in% net[i, Node1])
for(j in c){
if(net[j, Node1] == net[i, Node2]){
n[t] <- j
t <- t + 1
}
}
}
}
if(is.null(n)){
write.table(net, file = sprintf("removed/%s", name), row.names = F, sep = ",")
} else {
net <- net[-n]
write.table(net, file = sprintf("removed/%s", name), row.names = F, sep = ",")
}
rm(net)
}
for(k in 243:513){
net <- fread(files[k])
name <- names[k]
net <- unique(net)
t <- 1
n <- c()
for(i in 1:nrow(net)){
if(net[i, Node1] %in% net$Node2){
c <- which(net$Node2 %in% net[i, Node1])
for(j in c){
if(net[j, Node1] == net[i, Node2]){
n[t] <- j
t <- t + 1
}
}
}
}
if(is.null(n)){
write.table(net, file = sprintf("removed/%s", name), row.names = F, sep = ",")
} else {
net <- net[-n]
write.table(net, file = sprintf("removed/%s", name), row.names = F, sep = ",")
}
rm(net)
}
master_data <- fread("output/undirected/master_measures_2.csv")
View(master_data)
# create removed_loops networks
files <- list.files(path = "data/all_data", pattern = "*.csv", full.names = T)
files[243]
names <- list.files(path = "data/all_data", pattern = "*.csv", full.names = F)
for(k in 243:513){
net <- fread(files[k])
name <- names[k]
net <- removed_loops_data(net)
t <- 1
n <- c()
for(i in 1:nrow(net)){
if(net[i, Node1] %in% net$Node2){
c <- which(net$Node2 %in% net[i, Node1])
for(j in c){
if(net[j, Node1] == net[i, Node2]){
n[t] <- j
t <- t + 1
}
}
}
}
if(is.null(n)){
write.table(net, file = sprintf("removed_loops_data/%s", name), row.names = F, sep = ",")
} else {
net <- net[-n]
write.table(net, file = sprintf("removed_loops_data/%s", name), row.names = F, sep = ",")
}
rm(net)
}
# create removed_loops networks
files <- list.files(path = "data/all_data", pattern = "*.csv", full.names = T)
files[243]
master <- fread("output/undirected/master_measures_2.csv")
master <- fread("output/undirected/master_measures_2.csv")
master[k, Name]
master <- fread("output/undirected/master_measures_2.csv")
for(k in 243:513){
net <- fread(sprintf("data/all_data/%s.csv", master[k, Name]))
name <- master[k, Name]
net <- unique(net)
t <- 1
n <- c()
for(i in 1:nrow(net)){
if(net[i, Node1] %in% net$Node2){
c <- which(net$Node2 %in% net[i, Node1])
for(j in c){
if(net[j, Node1] == net[i, Node2]){
n[t] <- j
t <- t + 1
}
}
}
}
if(is.null(n)){
write.table(net, file = sprintf("removed_loops_data/%s", name), row.names = F, sep = ",")
} else {
net <- net[-n]
write.table(net, file = sprintf("removed_loops_data/%s", name), row.names = F, sep = ",")
}
rm(net)
}
for(k in 244:244){
net <- fread(sprintf("data/all_data/%s.csv", master[k, Name]))
name <- master[k, Name]
net <- unique(net)
t <- 1
n <- c()
for(i in 1:nrow(net)){
if(net[i, Node1] %in% net$Node2){
c <- which(net$Node2 %in% net[i, Node1])
for(j in c){
if(net[j, Node1] == net[i, Node2]){
n[t] <- j
t <- t + 1
}
}
}
}
if(is.null(n)){
write.table(net, file = sprintf("removed_loops_data/%s", name), row.names = F, sep = ",")
} else {
net <- net[-n]
write.table(net, file = sprintf("removed_loops_data/%s", name), row.names = F, sep = ",")
}
rm(net)
}
net <- fread(sprintf("data/all_data/%s.csv", master[k, Name]))
name <- master[k, Name]
net <- unique(net)
net <- fread(sprintf("data/all_data/%s.csv", master[k, Name]))
name <- master[k, Name]
net <- unique(net)
t <- 1
n <- c()
for(i in 1:nrow(net)){
if(net[i, Node1] %in% net$Node2){
c <- which(net$Node2 %in% net[i, Node1])
for(j in c){
if(net[j, Node1] == net[i, Node2]){
n[t] <- j
t <- t + 1
}
}
}
}
is.null(n)
write.table(net, file = sprintf("removed_loops_data/%s", name), row.names = F, sep = ",")
if(is.null(n)){
write.table(net, file = sprintf("removed_loops/%s", name), row.names = F, sep = ",")
} else {
net <- net[-n]
write.table(net, file = sprintf("removed_loops/%s", name), row.names = F, sep = ",")
}
k <- 244
net <- fread(sprintf("data/all_data/%s.csv", master[k, Name]))
name <- master[k, Name]
net <- unique(net)
net$ID <- 1:nrow(net)
final <- unique(net)
final$ID <- 1:nrow(net)
View(net)
t <- 1
n <- c()
i <- 1
net[i, Node1] %in% net$Node2
i <- 2
net[i, Node1] %in% net$Node2
k <- 1
net <- fread(sprintf("data/all_data/%s.csv", master[k, Name]))
name <- master[k, Name]
net <- unique(net)
net$ID <- 1:nrow(net)
final <- unique(net)
final$ID <- 1:nrow(net)
t <- 1
n <- c()
net[i, Node1] %in% net$Node2
c <- which(net$Node2 %in% net[i, Node1])
j <- c[1]
net[j, Node1] == net[i, Node2]
j <- c[2]
net[j, Node1] == net[i, Node2]
j <- c[3]
net[j, Node1] == net[i, Node2]
j <- c[4]
net[j, Node1] == net[i, Node2]
final[ID == j]
net[j, Node1]
net[i, Node2]
net$Node2 %in% net[i, Node1]
net[i, Node1]
final[ID == j]
final[-ID == j]
final[which(ID == j)]
which(ID == j)
which(final$ID == j)
which(final$ID == j)
which(j == final$ID)
master <- fread("output/undirected/master_measures_2.csv")
final[ID == j]
final[ID == j, ID]
final[!ID == j]
k <- 1
i <- 1
j <- c[4]
net <- fread(sprintf("data/all_data/%s.csv", master[k, Name]))
name <- master[k, Name]
net <- unique(net)
net$ID <- 1:nrow(net)
final <- unique(net)
final$ID <- 1:nrow(net)
net[i, Node1] %in% net$Node2
c <- which(net$Node2 %in% net[i, Node1])
net[j, Node1] == net[i, Node2]
j <- c[4]
net[j, Node1]
net[i, Node2]
net <- fread(sprintf("data/all_data/%s.csv", master[k, Name]))
name <- master[k, Name]
net <- unique(net)
net$ID <- 1:nrow(net)
final <- unique(net)
final$ID <- 1:nrow(net)
j <- c[3]
net[j, Node1]
net[i, Node2]
net[j, Node1] == net[i, Node2]
final[ID == j]
final[ID == 82]
i <- 2
j <- c[4]
net <- fread(sprintf("data/all_data/%s.csv", master[k, Name]))
name <- master[k, Name]
net <- unique(net)
net$ID <- 1:nrow(net)
final <- unique(net)
final$ID <- 1:nrow(net)
net[i, Node1] %in% net$Node2
c <- which(net$Node2 %in% net[i, Node1])
net[j, Node1] == net[i, Node2]
final[ID == j]
master <- fread("output/undirected/master_measures_2.csv")
master <- fread("output/undirected/master_measures_2.csv")
for(k in 1:1){
net <- fread(sprintf("data/all_data/%s.csv", master[k, Name]))
name <- master[k, Name]
net <- unique(net)
net$ID <- 1:nrow(net)
final <- unique(net)
final$ID <- 1:nrow(net)
for(i in 1:nrow(net)){
if(net[i, Node1] %in% net$Node2){
c <- which(net$Node2 %in% net[i, Node1])
for(j in c){
if(net[j, Node1] == net[i, Node2]){
final <- final[!ID == j]
}
}
}
}
if(is.null(n)){
write.table(final, file = sprintf("removed_loops/%s_2.csv", name), row.names = F, sep = ",")
} else {
net <- net[-n]
write.table(final, file = sprintf("removed_loops/%s_2.csv", name), row.names = F, sep = ",")
}
rm(net)
}
write.table(final, file = sprintf("removed_loops/%s_2.csv", name), row.names = F, sep = ",")
final[, 1:2]
write.table(final[, 1:2], file = sprintf("removed_loops/%s_2.csv", name), row.names = F, sep = ",")
master <- fread("output/undirected/master_measures_2.csv")
for(k in 3:3){
net <- fread(sprintf("data/all_data/%s.csv", master[k, Name]))
name <- master[k, Name]
net <- unique(net)
net$ID <- 1:nrow(net)
final <- unique(net)
final$ID <- 1:nrow(net)
for(i in 1:nrow(net)){
if(net[i, Node1] %in% net$Node2){
c <- which(net$Node2 %in% net[i, Node1])
for(j in c){
if(net[j, Node1] == net[i, Node2]){
final <- final[!ID == j]
}
}
}
}
if(is.null(n)){
write.table(final[, 1:2], file = sprintf("removed_loops/%s_2.csv", name), row.names = F, sep = ",")
} else {
net <- net[-n]
write.table(final[, 1:2], file = sprintf("removed_loops/%s_2.csv", name), row.names = F, sep = ",")
}
rm(net)
}
net[i, Node1] %in% net$Node2
c <- which(net$Node2 %in% net[i, Node1])
net[j, Node1]
net[i, Node2]
net[j, Node1] == net[i, Node2]
k <- 3
i <- 1
rm(j)
net <- fread(sprintf("data/all_data/%s.csv", master[k, Name]))
name <- master[k, Name]
net <- unique(net)
net$ID <- 1:nrow(net)
final <- unique(net)
final$ID <- 1:nrow(net)
for(i in 1:nrow(net)){
if(net[i, Node1] %in% net$Node2){
c <- which(net$Node2 %in% net[i, Node1])
for(j in c){
if(net[j, Node1] == net[i, Node2]){
final <- final[!ID == j]
}
}
}
}
master <- fread("output/undirected/master_measures_2.csv")
for(k in 3:3){
net <- fread(sprintf("data/all_data/%s.csv", master[k, Name]))
name <- master[k, Name]
net <- unique(net)
net$ID <- 1:nrow(net)
final <- unique(net)
final$ID <- 1:nrow(net)
for(i in 1:nrow(net)){
if(net[i, Node1] %in% net$Node2){
c <- which(net$Node2 %in% net[i, Node1])
for(j in c){
if(net[j, Node1] == net[i, Node2]){
final <- final[!ID == j]
}
}
}
}
if(is.null(n)){
write.table(final[, 1:2], file = sprintf("removed_loops/%s_2.csv", name), row.names = F, sep = ",")
} else {
write.table(final[, 1:2], file = sprintf("removed_loops/%s_2.csv", name), row.names = F, sep = ",")
}
rm(net)
}
rm(net, final)
master <- fread("output/undirected/master_measures_2.csv")
for(k in 243:513){
net <- fread(sprintf("data/all_data/%s.csv", master[k, Name]))
name <- master[k, Name]
net <- unique(net)
net$ID <- 1:nrow(net)
final <- unique(net)
final$ID <- 1:nrow(net)
for(i in 1:nrow(net)){
if(net[i, Node1] %in% net$Node2){
c <- which(net$Node2 %in% net[i, Node1])
for(j in c){
if(net[j, Node1] == net[i, Node2]){
final <- final[!ID == j]
}
}
}
}
if(is.null(n)){
write.table(final[, 1:2], file = sprintf("removed_loops/%s_2.csv", name), row.names = F, sep = ",")
} else {
write.table(final[, 1:2], file = sprintf("removed_loops/%s_2.csv", name), row.names = F, sep = ",")
}
rm(net, final)
}
master[250]
master[253]
master[253, Name]
master[252, Name]
master[255, Name]
master[256, Name]
for(k in 256:513){
net <- fread(sprintf("data/all_data/%s.csv", master[k, Name]))
name <- master[k, Name]
net <- unique(net)
net$ID <- 1:nrow(net)
final <- unique(net)
final$ID <- 1:nrow(net)
for(i in 1:nrow(net)){
if(net[i, Node1] %in% net$Node2){
c <- which(net$Node2 %in% net[i, Node1])
for(j in c){
if(net[j, Node1] == net[i, Node2]){
final <- final[!ID == j]
}
}
}
}
if(is.null(n)){
write.table(final[, 1:2], file = sprintf("removed_loops/%s.csv", name), row.names = F, sep = ",")
} else {
write.table(final[, 1:2], file = sprintf("removed_loops/%s.csv", name), row.names = F, sep = ",")
}
rm(net, final)
}
